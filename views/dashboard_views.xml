<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_comprehensive_dashboard_form" model="ir.ui.view">
            <field name="name">tk.comprehensive.dashboard.form</field>
            <field name="model">tk.comprehensive.dashboard</field>
            <field name="arch" type="xml">
                <form string="Comprehensive Toolkit Dashboard">
                    <header>
                        <button name="refresh_dashboard" string="Refresh" type="object" class="btn btn-primary"/>
                    </header>
                    <sheet>
                        <div class="oe_title mb-4">
                            <h1 class="d-inline-block">Comprehensive Toolkit Dashboard</h1>
                        </div>

                        <div class="mb-4">
                            <group>
                                <group>
                                    <field name="date_from"/>
                                </group>
                                <group>
                                    <field name="date_to"/>
                                </group>
                            </group>
                        </div>

                        <h2 class="mb-3">Activity Summary</h2>
                        <div class="row">
                            <div class="col-xl-3 col-lg-6 mb-4">
                                <div class="card border-left-primary h-100">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col">
                                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Ownership Changes</div>
                                                <div class="h3 mb-0 font-weight-bold text-gray-800"><field name="total_ownership_changes"/></div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fa fa-exchange fa-2x text-gray-300"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-white border-top-0 text-right">
                                        <button name="action_view_ownership_logs" type="object" class="btn btn-sm btn-outline-primary">View Details <i class="fa fa-arrow-right"/></button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 mb-4">
                                <div class="card border-left-success h-100">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col">
                                                <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Assignment Changes</div>
                                                <div class="h3 mb-0 font-weight-bold text-gray-800"><field name="total_assignment_changes"/></div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fa fa-tasks fa-2x text-gray-300"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-white border-top-0 text-right">
                                        <button name="action_view_assignment_logs" type="object" class="btn btn-sm btn-outline-success">View Details <i class="fa fa-arrow-right"/></button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 mb-4">
                                <div class="card border-left-info h-100">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col">
                                                <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Access Changes</div>
                                                <div class="h3 mb-0 font-weight-bold text-gray-800"><field name="total_access_changes"/></div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fa fa-key fa-2x text-gray-300"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-white border-top-0 text-right">
                                        <button name="action_view_access_logs" type="object" class="btn btn-sm btn-outline-info">View Details <i class="fa fa-arrow-right"/></button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 mb-4">
                                <div class="card border-left-warning h-100">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col">
                                                <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Responsibility Changes</div>
                                                <div class="h3 mb-0 font-weight-bold text-gray-800"><field name="total_responsibility_changes"/></div>
                                            </div>
                                            <div class="col-auto">
                                                <i class="fa fa-user-circle fa-2x text-gray-300"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-white border-top-0 text-right">
                                        <button name="action_view_responsibility_logs" type="object" class="btn btn-sm btn-outline-warning">View Details <i class="fa fa-arrow-right"/></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 col-lg-6">
                                <h2 class="mb-3">Current Status</h2>
                                <div class="card mb-3">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>Unowned Records</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="unowned_records_count"/>
                                            </div>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>Unassigned Records</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="unassigned_records_count"/>
                                            </div>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>Overdue Assignments</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="overdue_assignments_count"/>
                                            </div>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>Expired Responsibilities</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="expired_responsibilities_count"/>
                                            </div>
                                        </li>
									</ul>
								</div>

                                <h2 class="mb-3">My Activity</h2>
                                <div class="card">
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>My Owned Records</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="my_owned_records_count"/>
                                                <button name="action_view_my_owned_records" type="object" class="btn btn-light btn-sm rounded-circle" style="width: 2rem; height: 2rem;" title="View Records">
                                                    <i class="fa fa-arrow-right"/>
                                                </button>
                                            </div>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>My Assignments</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="my_assignments_count"/>
                                                <button name="action_view_my_assignments" type="object" class="btn btn-light btn-sm rounded-circle" style="width: 2rem; height: 2rem;" title="View Assignments">
                                                    <i class="fa fa-arrow-right"/>
                                                </button>
                                            </div>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong>My Responsibilities</strong>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <field class="mb-0 mt-1" name="my_responsibilities_count"/>
                                                <button name="action_view_my_responsibilities" type="object" class="btn btn-light btn-sm rounded-circle" style="width: 2rem; height: 2rem;" title="View Responsibilities">
                                                    <i class="fa fa-arrow-right"/>
                                                </button>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-sm-12 col-lg-6">
                                <h2 class="mb-3">Recent Activity</h2>
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h5 class="m-0 font-weight-bold">Top Users (Last 30 Days)</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>Top Ownership Transferrer:</strong></div>
											<div><field name="top_ownership_transferrer"/></div>
										</div>
                                        <div class="dropdown-divider"></div>
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>Top Assigner:</strong></div>
											<div><field name="top_assigner"/></div>
										</div>
                                        <div class="dropdown-divider"></div>
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>Most Responsible User:</strong></div>
											<div><field name="most_responsible_user"/></div>
										</div>
                                    </div>
                                    <div class="card-header border-top">
                                        <h5 class="m-0 font-weight-bold">Activity (Last 7 Days)</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>Ownership Transfers:</strong></div>
											<field name="recent_ownership_transfers"/>
										</div>
                                        <div class="dropdown-divider"></div>
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>New Assignments:</strong></div>
											<field name="recent_new_assignments"/>
										</div>
                                        <div class="dropdown-divider"></div>
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>Access Grants:</strong></div>
											<field name="recent_access_grants"/>
										</div>
                                        <div class="dropdown-divider"></div>
                                        <div class="d-flex justify-content-between align-items-center">
										    <div><strong>Responsibility Changes:</strong></div>
											<field name="recent_responsibility_changes"/>
										</div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="mt-4">
                            <notebook>
                                <page string="Recent Ownership Changes">
                                    <field name="recent_ownership_logs" nolabel="1">
                                        <tree>
                                            <field name="date"/>
                                            <field name="action"/>
                                            <field name="model_name"/>
                                            <field name="record_reference"/>
                                            <field name="old_owner_id"/>
                                            <field name="new_owner_id"/>
                                            <field name="user_id"/>
                                            <button name="open_record" type="object" icon="fa-external-link" title="Open Record"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Recent Assignment Changes">
                                    <field name="recent_assignment_logs" nolabel="1">
                                        <tree>
                                            <field name="date"/>
                                            <field name="action"/>
                                            <field name="model_name"/>
                                            <field name="record_reference"/>
                                            <field name="old_assigned_user_id"/>
                                            <field name="new_assigned_user_id"/>
                                            <field name="user_id"/>
                                            <button name="open_record" type="object" icon="fa-external-link" title="Open Record"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Recent Access Changes">
                                    <field name="recent_access_logs" nolabel="1">
                                        <tree>
                                            <field name="date"/>
                                            <field name="action"/>
                                            <field name="model_name"/>
                                            <field name="record_reference"/>
                                            <field name="target_user_id"/>
                                            <field name="target_group_id"/>
                                            <field name="user_id"/>
                                            <button name="open_record" type="object" icon="fa-external-link" title="Open Record"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Recent Responsibility Changes">
                                    <field name="recent_responsibility_logs" nolabel="1">
                                        <tree>
                                            <field name="date"/>
                                            <field name="action"/>
                                            <field name="model_name"/>
                                            <field name="record_reference"/>
                                            <field name="old_responsible_user_id"/>
                                            <field name="new_responsible_user_id"/>
                                            <field name="user_id"/>
                                            <button name="open_record" type="object" icon="fa-external-link" title="Open Record"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="action_comprehensive_dashboard" model="ir.actions.act_window">
            <field name="name">Comprehensive Toolkit Dashboard</field>
            <field name="res_model">tk.comprehensive.dashboard</field>
            <field name="view_mode">form</field>
            <field name="target">current</field>
            <field name="context">{}</field>
        </record>
    </data>
</odoo>
